---
import { basics } from "@cv"
import Section from "@/components/Section.astro";

// Importa tus iconos SVG como componentes Astro
import GitHub from "@/icons/GitHub.astro";
import LinkedIn from "@/icons/LinkedIn.astro";
import X from "@/icons/X.astro";
import WorldMap from "@/icons/WorldMap.astro";


const { name, label, image, location, profiles, phone, email, url } = basics
const { city, region, countryCode } = location

// Devuelve el componente correcto
export const getSocialIcon = (network) => {
    const icons = {
        GitHub,
        LinkedIn,
        X,
        WorldMap,
    };
    return icons[network];
};
---

<Section id="home">
    <div class="flex flex-col lg:flex-row items-center justify-between gap-8" data-animate-on-load style="--delay: 100ms">
        <div class="flex-1">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-3 leading-tight" data-animate-on-load style="--delay: 200ms">
                {name}
            </h1>
            <h2 class="text-2xl md:text-3xl text-accent mb-6" data-animate-on-load style="--delay: 300ms">
                {label}
            </h2>

            <div class="space-y-3 mb-8" data-animate-on-load style="--delay: 600ms">
                <div class="flex items-center text-gray-300">
                    <span class="w-6 h-6 mr-2">üìç</span>
                    <span>{city}, {region}, {countryCode}</span>
                </div>
                {phone && (
                        <div class="flex items-center text-gray-300">
                            <span class="w-6 h-6 mr-2">üìû</span>
                            <a
                                    href={`tel:${phone.replace(/[^0-9+]/g, '')}`}
                                    class="hover:text-accent transition-colors"
                            >
                                {phone}
                            </a>
                        </div>
                )}
                {email && (
                        <div class="flex items-center text-gray-300">
                            <span class="w-6 h-6 mr-2">‚úâÔ∏è</span>
                            <a
                                    href={`mailto:${email}`}
                                    class="hover:text-accent transition-colors"
                            >
                                {email}
                            </a>
                        </div>
                )}
                {url && (
                        <div class="flex items-center text-gray-300">
                            <span class="w-6 h-6 mr-2">üåê</span>
                            <a
                                    href={url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="hover:text-accent transition-colors"
                            >
                                {url.replace(/^https?:\/\//, '').replace(/\/$/, '')}
                            </a>
                        </div>
                )}
            </div>

            {profiles && profiles.length > 0 && (
                    <div class="flex flex-wrap gap-3 mt-6" data-animate-on-load style="--delay: 700ms">
                        {profiles.map(profile => {
                            const Icon = getSocialIcon(profile.network);
                            return (
                                    <a
                                            href={profile.url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            class="flex items-center px-4 py-2 bg-gray-800/50 hover:bg-accent/20 rounded-lg transition-all duration-200 hover:scale-105"
                                            title={profile.network}
                                            data-social-link
                                    >
                                        <Icon class="w-5 h-5 mr-2 text-accent" />
                                    </a>
                            );
                        })}
                    </div>
            )}
        </div>

        <figure class="w-48 h-48 md:w-64 md:h-64 lg:w-80 lg:h-80 rounded-full overflow-hidden border-4 border-accent shadow-2xl group" data-animate-on-load style="--delay: 300ms">
            <img
                    src={image}
                    alt={name}
                    class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                    width="320"
                    height="320"
                    loading="eager"
                    data-profile-image
            />
        </figure>
    </div>
</Section>

<style>
    [data-profile-image] {
        transform-origin: center;
    }

    [data-social-link]:hover {
        transform: translateY(-2px);
    }

    [data-nav-link] {
        position: relative;
        overflow: hidden;
    }

    [data-nav-link]::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: rgb(var(--accent));
        transition: width 0.3s ease;
    }

    [data-nav-link]:hover::after {
        width: 100%;
    }

    @media (max-width: 767px) {
        [data-nav-link]::after {
            display: none;
        }
    }
</style>
