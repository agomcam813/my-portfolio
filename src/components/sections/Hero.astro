---
import { basics } from "@cv"
import Section from "@/components/Section.astro";

// Importa tus iconos SVG como componentes Astro
import GitHub from "@/icons/GitHub.astro";
import LinkedIn from "@/icons/LinkedIn.astro";
import Mail from "@/icons/Mail.astro";
import Download from "@/icons/Download.astro";


const { name, label, image, location, profiles, email, url } = basics


// Devuelve el componente correcto
export const getSocialIcon = (network) => {
    const icons = {
        GitHub,
        LinkedIn,
        Mail,
    };
    
    // Si el perfil es un correo, devolvemos el ícono de correo
    if (network === 'Email') return Mail;
    return icons[network];
};
---

<Section id="home">
    <div class="flex flex-col lg:flex-row items-center justify-between gap-8" data-animate-on-load style="--delay: 100ms">
        {/* Contenedor de la foto (arriba en móvil, derecha en desktop) */}
        <figure class="w-48 h-48 md:w-64 md:h-64 lg:w-80 lg:h-80 rounded-full overflow-hidden border-4 border-accent shadow-2xl group mx-auto lg:order-2" data-animate-on-load style="--delay: 100ms">
            <img
                src={image}
                alt={name}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                width="320"
                height="320"
                loading="lazy"
            />
        </figure>

        {/* Contenedor del texto (centrado en móvil, izquierda en desktop) */}
        <div class="flex-1 w-full lg:w-auto text-center lg:text-left">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-3 leading-tight" data-animate-on-load style="--delay: 200ms">
                {name}
            </h1>
            <h2 class="text-2xl md:text-3xl text-accent mb-6" data-animate-on-load style="--delay: 300ms">
                {label}
            </h2>

            {/* Sección de redes sociales (solo visible en desktop) */}
            <div class="hidden lg:block">
                {profiles && (profiles.length > 0 || url || email) && (
                    <div class="flex flex-wrap gap-4 mt-6">
                        {profiles.map((profile) => {
                            const Icon = getSocialIcon(profile.network);
                            return (
                                <a
                                    href={profile.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 text-gray-300 hover:bg-accent hover:text-white transition-colors"
                                    aria-label={profile.network}
                                    data-animate-on-load
                                    style={`--delay: ${500 + (profiles.indexOf(profile) * 100)}ms`}
                                >
                                    <Icon class="w-5 h-5" />
                                </a>
                            );
                        })}
                        {email && (
                            <a
                                href={`mailto:${email}`}
                                class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 text-gray-300 hover:bg-accent hover:text-white transition-colors"
                                aria-label="Email"
                                data-animate-on-load
                                style={`--delay: ${500 + (profiles.length * 100) + 100}ms`}
                            >
                                <Mail class="w-5 h-5" />
                            </a>
                        )}
                        <div class="relative group" data-animate-on-load style={`--delay: ${500 + (profiles.length * 100) + 200}ms`}>
                            <a
                                href="./files/CV-Antonio-Gomez-Camarena.pdf"
                                download
                                class="flex items-center gap-2 px-4 py-2 rounded-full bg-accent text-white hover:bg-accent/90 transition-colors text-sm font-medium"
                                aria-label="Descargar CV en formato PDF"
                                title="Descargar CV (PDF - Antonio Gómez Camarena)"
                            >
                                <Download class="w-4 h-4" />
                                <span class="hidden sm:inline">Descargar CV</span>
                                <span class="sm:hidden">CV</span>
                            </a>
                            <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs bg-gray-900 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                                CV_Antonio_Gomez_Camarena.pdf
                                <div class="absolute top-full left-1/2 w-2 h-2 -translate-x-1/2 -translate-y-1/2 rotate-45 bg-gray-900"></div>
                            </div>
                        </div>
                </div>
            )}
        </div>

        {/* Contenedor de redes sociales (solo visible en móvil) */}
        <div class="lg:hidden w-full">
            {profiles && profiles.length > 0 && (
                <div class="flex flex-wrap justify-center gap-4 mt-8">
                    {profiles.map((profile) => {
                        const Icon = getSocialIcon(profile.network);
                        return (
                            <a
                                href={profile.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                class="w-12 h-12 flex items-center justify-center rounded-full bg-gray-800 text-gray-300 hover:bg-accent hover:text-white transition-colors"
                                aria-label={profile.network}
                                data-animate-on-load
                                style={`--delay: ${500 + (profiles.indexOf(profile) * 100)}ms`}
                            >
                                <Icon class="w-6 h-6" />
                            </a>
                        );
                    })}
                    {email && (
                        <a
                            href={`mailto:${email}`}
                            class="w-12 h-12 flex items-center justify-center rounded-full bg-gray-800 text-gray-300 hover:bg-accent hover:text-white transition-colors"
                            aria-label="Email"
                            data-animate-on-load
                            style={`--delay: ${500 + (profiles.length * 100) + 100}ms`}
                        >
                            <Mail class="w-6 h-6" />
                        </a>
                    )}
                    <div class="relative group w-full flex justify-center mt-4" data-animate-on-load style={`--delay: ${500 + (profiles.length * 100) + 200}ms`}>
                        <a
                            href="./files/CV-Antonio-Gomez-Camarena.pdf"
                            download
                            class="flex items-center gap-2 px-6 py-3 rounded-full bg-accent text-white hover:bg-accent/90 transition-colors text-base font-medium w-auto relative z-10"
                            aria-label="Descargar CV en formato PDF"
                            title="Descargar CV (PDF - Antonio Gómez Camarena)"
                        >
                            <Download class="w-5 h-5" />
                            <span>Descargar CV</span>
                        </a>
                    </div>
                </div>
            )}
        </div>
    </div>
</Section>

<style>
    [data-profile-image] {
        transform-origin: center;
    }

    [data-social-link]:hover {
        transform: translateY(-2px);
    }

    [data-nav-link] {
        position: relative;
        overflow: hidden;
    }

    [data-nav-link]::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: rgb(var(--accent));
        transition: width 0.3s ease;
    }

    [data-nav-link]:hover::after {
        width: 100%;
    }

    @media (max-width: 767px) {
        [data-nav-link]::after {
            display: none;
        }
    }
</style>
