---
const { project } = Astro.props;
const { name, description, highlights = [], url, startDate, endDate, github, technologies = [] } = project;

const formatDate = (dateString) => {
  if (!dateString) return 'Present';
  const date = new Date(dateString);
  return date.toLocaleDateString('es-ES', { year: 'numeric', month: 'short' });
};

const startDateFormatted = formatDate(startDate);
const endDateFormatted = formatDate(endDate);
---

<article class="group relative bg-white/80 dark:bg-gray-800/30 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700/50 hover:border-accent/50 dark:hover:border-accent/30 transition-all duration-300 hover:shadow-lg hover:shadow-accent/5 dark:hover:shadow-accent/5 flex flex-col h-full">
  {/* Gradient overlay on hover */}
  <div class="absolute inset-0 bg-gradient-to-br from-accent/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

  <div class="relative px-6 py-5 flex flex-col h-full">
    {/* Header with GitHub link and date */}
    <div class="flex justify-between items-center mb-4 pb-4 border-b border-gray-200 dark:border-gray-700/50">
      {github ? (
        <a 
          href={github}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-gray-600 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors flex items-center"
          title="Ver en GitHub"
        >
          <svg class="w-4 h-4 mr-1.5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.202 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48A10.02 10.02 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path>
          </svg>
          Ver en GitHub
        </a>
      ) : <div class="h-5"></div>}
      <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors whitespace-nowrap">
        {startDateFormatted} - {endDateFormatted}
      </span>
    </div>
    
    {/* Project title */}
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 min-h-[32px]">
      {url ? (
        <a 
          href="{url}" 
          target="_blank" 
          rel="noopener noreferrer"
          class="hover:underline underline-offset-4 decoration-2 decoration-gray-300 dark:decoration-gray-600 hover:decoration-gray-400 dark:hover:decoration-gray-500"
        >
          {name}
        </a>
      ) : name}
    </h3>
    
    <div class="flex-grow">
      {/* Description */}
      {description && (
        <p class="text-gray-700 dark:text-gray-300 mb-4">{description}</p>
      )}
      
      {/* Highlights */}
      {highlights && highlights.length > 0 && (
        <div class="space-y-3">
          <h4 class="text-sm font-medium text-gray-600 dark:text-gray-400">Características principales:</h4>
          <ul class="space-y-2">
            {highlights.map((highlight, index) => (
              <li key={index} class="flex items-start group-hover:translate-x-1 transition-transform duration-200">
                <span class="text-accent mr-2">•</span>
                <span class="text-gray-700 dark:text-gray-300">{highlight}</span>
              </li>
            ))}
          </ul>
        </div>
      )}
      
      {/* Technologies */}
      {technologies && technologies.length > 0 && (
        <div class="mt-4">
          <h4 class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">Tecnologías utilizadas:</h4>
          <div class="flex flex-wrap gap-2">
            {technologies.map((tech, index) => (
              <span 
                key={index} 
                class="px-2 py-1 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600/50 hover:bg-accent/10 hover:border-accent/50 hover:text-accent transition-colors"
              >
                {tech}
              </span>
            ))}
          </div>
        </div>
      )}
    </div>
    
    {/* Links */}
    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700/50 flex flex-wrap gap-3">
      {url && url !== github && (
        <a 
          href={url}
          target="_blank"
          rel="noopener noreferrer"
          class="text-sm text-accent hover:opacity-80 transition-opacity flex items-center"
          title="Ver proyecto"
        >
          <span class="group-hover:underline">Ver proyecto</span>
          <svg class="w-3.5 h-3.5 ml-1.5 group-hover:translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </a>
      )}
    </div>
  </div>
</article>
